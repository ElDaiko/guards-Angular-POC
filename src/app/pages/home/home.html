<h1>Home (Pública)</h1>

<div class="auth-controls">
  <div class="auth-status">
    <p>
      Estado de autenticación:
      <span [class]="isLoggedIn ? 'logged-in' : 'logged-out'">
        {{ isLoggedIn ? 'Autenticado' : 'No autenticado' }}
      </span>
    </p>
  </div>

  <button (click)="toggleAuth()" class="auth-button">
    {{ isLoggedIn ? 'Cerrar Sesión' : 'Iniciar Sesión' }}
  </button>
</div>

<div class="test-instructions">
  <h2>🧪 Cómo probar los Guards:</h2>

  <div class="step">
    <h3>1️⃣ Probar canMatch y canActivate:</h3>
    <p>
      Con el estado actual (<strong
        >{{ isLoggedIn ? 'Autenticado' : 'No autenticado' }}</strong
      >):
    </p>
    <a [routerLink]="['/private']" class="test-link"> 🔗 Ir a /private </a>
    <p class="result-info">
      {{ isLoggedIn ? '✅ Deberías ver ambos guards permitir el acceso' : '❌
      Deberías ver ambos guards denegar el acceso' }}
    </p>
  </div>

  <div class="step">
    <h3>2️⃣ Probar canActivateChild:</h3>
    <p>Con el estado actual, intenta acceder directamente a:</p>
    <div class="child-test-links">
      <a [routerLink]="['/private/settings']" class="test-link">
        🔧 /private/settings
      </a>
      <a [routerLink]="['/private/profile']" class="test-link">
        👤 /private/profile
      </a>
    </div>
    <p class="result-info">
      {{ isLoggedIn ? '✅ Deberías ver los 3 guards ejecutarse en orden' : '❌
      Los guards deberían bloquear el acceso antes de llegar a la ruta hija' }}
    </p>
  </div>

  <div class="console-tip">
    <h3>📋 Abre la Consola (F12):</h3>
    <p>
      Para ver la ejecución de los guards en tiempo real, abre la consola del
      navegador donde verás logs como:
    </p>
    <div class="console-example">
      <div class="log">🔍 [CANMATCH] AuthMatchGuard ejecutándose...</div>
      <div class="log">🔐 [CANACTIVATE] AuthGuard ejecutándose...</div>
      <div class="log">
        👶 [CANACTIVATECHILD] AuthChildGuard ejecutándose...
      </div>
    </div>
  </div>
</div>

<div class="navigation">
  <h2>🚀 Orden de Ejecución:</h2>
  <p>Los guards se ejecutan en este orden específico:</p>
  <ol class="execution-order">
    <li>
      <strong>canMatch:</strong> Determina si la configuración de ruta debe ser
      considerada
    </li>
    <li><strong>canActivate:</strong> Valida el acceso a la ruta padre</li>
    <li>
      <strong>canActivateChild:</strong> Valida el acceso a rutas hijas (solo si
      existe)
    </li>
  </ol>
</div>
